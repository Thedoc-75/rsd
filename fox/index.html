<!DOCTYPE html>
<html lang="it">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content="Radio Studio Doc - La tua web radio amatoriale con notizie, musica e intrattenimento.">
  <title>Radio Studio Doc</title>

  <!-- Open Graph Tags -->
  <meta property="og:title" content="Radio Studio Doc">
  <meta property="og:description" content="La tua web radio amatoriale con notizie, musica e intrattenimento.">
  <meta property="og:image" content="https://radiostudiodoc.org/assets/images/radiostudiodoc-og-image.jpg">
  <meta property="og:url" content="https://radiostudiodoc.org">
  <meta name="twitter:card" content="summary_large_image">

  <link rel="icon" href="favicon.ico" type="image/x-icon">
  <link rel="stylesheet" href="assets/css/style.css">

  <!-- Fonts and Icons -->
  <link href="https://fonts.googleapis.com/css?family=Open+Sans:400,700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" integrity="sha512-..." crossorigin="anonymous" referrerpolicy="no-referrer" />

  <script defer src="assets/js/scripts.js"></script>
</head>

<body>
  <header>
    <h1>Radio Studio Doc</h1>
    <p>La tua web radio amatoriale</p>
  </header>

  <main>
    <section id="now-playing">
      <h2>In onda ora:</h2>
      <p id="now-playing-text" aria-live="polite">Caricamento...</p>
    </section>

    <section id="radio-player">
      <h2>Ascolta la diretta</h2>
      <audio id="radio-stream" controls preload="none">
        <source src="http://79.37.189.42:80/radio_studio_doc" type="audio/mpeg">
        Il tuo browser non supporta l'elemento audio.
      </audio>
    </section>
  </main>

  <footer>
    <p>&copy; 2025 Radio Studio Doc. Tutti i diritti riservati.</p>
  </footer>

  <script>
    document.addEventListener("DOMContentLoaded", () => {
      const nowPlayingText = document.getElementById("now-playing-text");
      const updateNowPlaying = async () => {
        try {
          const response = await fetch("http://79.37.189.42:80/api/nowplaying/radio_studio_doc");
          if (!response.ok) throw new Error("Errore nella richiesta");
          const data = await response.json();
          nowPlayingText.textContent = data.now_playing.song.text || "Brano sconosciuto";
        } catch (error) {
          nowPlayingText.textContent = "Impossibile recuperare i dati";
          console.error("Errore durante il recupero dei metadati:", error);
        }
      };

      updateNowPlaying();
      setInterval(updateNowPlaying, 10000);
    });
  </script>
</body>

</html>


